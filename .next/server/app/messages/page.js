(()=>{var e={};e.id=4750,e.ids=[4750,5442],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},4493:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o}),s(8244),s(8189),s(5866);var a=s(3191),r=s(8716),n=s(7922),l=s.n(n),i=s(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let o=["",{children:["messages",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8244)),"C:\\Users\\mark\\Documents\\ME-IN\\app\\messages\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8189)),"C:\\Users\\mark\\Documents\\ME-IN\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\mark\\Documents\\ME-IN\\app\\messages\\page.tsx"],u="/messages/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/messages/page",pathname:"/messages",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3127:(e,t,s)=>{Promise.resolve().then(s.bind(s,793))},793:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var a=s(326),r=s(7577),n=s(5047),l=s(2881);let i=(0,l.Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var c=s(2933),o=s(3855),d=s(8307),u=s(9730),m=s(5442);class h{static{this.channels=new Map}static async createChatRoom(e,t,s){try{let{data:a,error:r}=await m.supabase.from("chat_rooms").insert({campaign_id:e,brand_id:t,influencer_id:s}).select().single();if(r)return console.error("채팅방 생성 오류:",r),null;return a}catch(e){return console.error("채팅방 생성 중 오류:",e),null}}static async getChatRooms(e){try{let{data:t,error:s}=await m.supabase.from("chat_rooms").select(`
          *,
          last_message:chat_messages(*),
          brand:brands(company_name_ko, company_name_en, logo_url),
          influencer:influencers(display_name, avatar_url)
        `).or(`brand_id.eq.${e},influencer_id.eq.${e}`).order("updated_at",{ascending:!1});if(s)return console.error("채팅방 목록 조회 오류:",s),[];return t||[]}catch(e){return console.error("채팅방 목록 조회 중 오류:",e),[]}}static async getMessages(e,t=50){try{let{data:s,error:a}=await m.supabase.from("chat_messages").select("*").eq("room_id",e).order("created_at",{ascending:!1}).limit(t);if(a)return console.error("메시지 조회 오류:",a),[];return(s||[]).reverse()}catch(e){return console.error("메시지 조회 중 오류:",e),[]}}static async sendMessage(e,t,s,a,r="text",n){try{let{data:l,error:i}=await m.supabase.from("chat_messages").insert({room_id:e,sender_id:t,receiver_id:s,content:a,message_type:r,attachments:n||[]}).select().single();if(i)return console.error("메시지 전송 오류:",i),null;return await m.supabase.from("chat_rooms").update({last_message_id:l.id,updated_at:new Date().toISOString()}).eq("id",e),l}catch(e){return console.error("메시지 전송 중 오류:",e),null}}static subscribeToMessages(e,t,s){let a=m.supabase.channel(`chat_room_${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`room_id=eq.${e}`},e=>{t(e.new)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_messages",filter:`room_id=eq.${e}`},e=>{t(e.new)}).subscribe(t=>{"SUBSCRIBED"===t?console.log("메시지 구독 성공:",e):"CHANNEL_ERROR"===t&&(console.error("메시지 구독 오류:",e),s?.(Error("채널 구독 실패")))});return this.channels.set(e,a),a}static subscribeToPresence(e,t,s){let a=m.supabase.channel(`presence_${e}`).on("presence",{event:"sync"},()=>{s(Object.values(a.presenceState()).flat().map(e=>({id:e.presence_ref||e.user_id||"unknown",name:e.name||"Unknown User",type:e.type||"user"})))}).on("presence",{event:"join"},({key:e,newPresences:t})=>{console.log("사용자 입장:",e,t)}).on("presence",{event:"leave"},({key:e,leftPresences:t})=>{console.log("사용자 퇴장:",e,t)}).subscribe(async e=>{"SUBSCRIBED"===e&&await a.track({user_id:t,online_at:new Date().toISOString()})});return a}static async markAsRead(e,t){try{let{error:s}=await m.supabase.from("chat_messages").update({read_at:new Date().toISOString()}).eq("room_id",e).eq("receiver_id",t).is("read_at",null);if(s)return console.error("읽음 처리 오류:",s),!1;return!0}catch(e){return console.error("읽음 처리 중 오류:",e),!1}}static unsubscribe(e){let t=this.channels.get(e);t&&(m.supabase.removeChannel(t),this.channels.delete(e))}static unsubscribeAll(){this.channels.forEach(e=>{m.supabase.removeChannel(e)}),this.channels.clear()}static async uploadFile(e,t){try{let s=e.name.split(".").pop(),a=`${t}_${Date.now()}.${s}`,{data:r,error:n}=await m.supabase.storage.from("chat-files").upload(a,e);if(n)return console.error("파일 업로드 오류:",n),null;let{data:l}=m.supabase.storage.from("chat-files").getPublicUrl(a);return l.publicUrl}catch(e){return console.error("파일 업로드 중 오류:",e),null}}static async getUserInfo(e){try{let{data:t,error:s}=await m.supabase.from("users").select(`
          id,
          display_name,
          avatar_url,
          user_type,
          brands(company_name_ko, company_name_en, logo_url),
          influencers(display_name, avatar_url)
        `).eq("id",e).single();if(s)return console.error("사용자 정보 조회 오류:",s),null;return{id:t.id,name:t.display_name||"Unknown User",avatar:t.avatar_url,type:t.user_type,is_online:!1}}catch(e){return console.error("사용자 정보 조회 중 오류:",e),null}}}var x=s(1248);function p({onSelectRoom:e,onCreateRoom:t}){let{user:s}=(0,x.d)(),[n,l]=(0,r.useState)([]),[m,h]=(0,r.useState)(""),[p,g]=(0,r.useState)(!0),y=n.filter(e=>{if(!m)return!0;let t=m.toLowerCase();return e.brand_id?.toLowerCase().includes(t)||e.influencer_id?.toLowerCase().includes(t)||e.campaign_id?.toLowerCase().includes(t)}),f=e=>{let t=new Date(e),s=(new Date().getTime()-t.getTime())/36e5;return s<24?t.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):s<168?t.toLocaleDateString("ko-KR",{weekday:"short"}):t.toLocaleDateString("ko-KR",{month:"short",day:"numeric"})},b=(e,t)=>e&&e.sender_id!==t?e.read_at?a.jsx(i,{className:"w-4 h-4 text-blue-500"}):a.jsx(c.Z,{className:"w-4 h-4 text-gray-400"}):null,j=e=>{if(!e)return"메시지가 없습니다.";switch(e.message_type){case"image":return"\uD83D\uDCF7 이미지";case"file":return"\uD83D\uDCCE 파일";default:return e.content}};return p?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"채팅"}),t&&a.jsx("button",{onClick:t,className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700",children:a.jsx(o.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"채팅방 검색...",value:m,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:0===y.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[a.jsx(u.Z,{className:"w-12 h-12 mb-4 text-gray-300"}),a.jsx("p",{className:"text-lg font-medium mb-2",children:"채팅방이 없습니다"}),(0,a.jsxs)("p",{className:"text-sm text-center",children:["브랜드나 인플루언서와의",a.jsx("br",{}),"첫 대화를 시작해보세요"]})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:y.map(t=>a.jsx("div",{onClick:()=>e(t),className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx(u.Z,{className:"w-6 h-6 text-gray-500"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:t.brand_id===s?.id?"인플루언서":"브랜드"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[t.last_message&&a.jsx("span",{className:"text-xs text-gray-500",children:f(t.last_message.created_at)}),b(t.last_message||null,s?.id||"")]})]}),a.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:j(t.last_message||null)}),t.unread_count>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["캠페인 ID: ",t.campaign_id]}),a.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:t.unread_count})]})]})]})},t.id))})})]})}var g=s(6333),y=s(2887),f=s(9758);let b=(0,l.Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),j=(0,l.Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),v=(0,l.Z)("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);var N=s(9436);let w=(0,l.Z)("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),_=(0,l.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),k=(0,l.Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),S=(0,l.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);class C{static{this.SUPPORTED_LANGUAGES=[{code:"ko",name:"Korean",nativeName:"한국어"},{code:"en",name:"English",nativeName:"English"},{code:"ar",name:"Arabic",nativeName:"العربية"},{code:"ja",name:"Japanese",nativeName:"日本語"},{code:"zh",name:"Chinese",nativeName:"中文"},{code:"es",name:"Spanish",nativeName:"Espa\xf1ol"},{code:"fr",name:"French",nativeName:"Fran\xe7ais"},{code:"de",name:"German",nativeName:"Deutsch"},{code:"ru",name:"Russian",nativeName:"Русский"},{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"}]}static getSupportedLanguages(){return this.SUPPORTED_LANGUAGES}static getLanguageByCode(e){return this.SUPPORTED_LANGUAGES.find(t=>t.code===e)}static async translateText(e,t,s){try{let a=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,target:t,source:s})});if(!a.ok)throw Error(`Translation failed: ${a.statusText}`);return await a.json()}catch(e){return console.error("번역 오류:",e),null}}static async detectLanguage(e){try{let t=await this.translateText(e,"en");return t?.detectedLanguage||null}catch(e){return console.error("언어 감지 오류:",e),null}}static async translateToMultipleLanguages(e,t,s){let a={};try{let r=t.map(async t=>{let r=await this.translateText(e,t,s);r&&(a[t]=r.translatedText)});return await Promise.all(r),a}catch(e){return console.error("다중 언어 번역 오류:",e),a}}static async translateCampaignContent(e,t){let s={};try{for(let a of t){if(s[a]={},e.title){let t=await this.translateText(e.title,a);t&&(s[a].title=t.translatedText)}if(e.description){let t=await this.translateText(e.description,a);t&&(s[a].description=t.translatedText)}if(e.requirements){let t=await this.translateText(e.requirements,a);t&&(s[a].requirements=t.translatedText)}}return s}catch(e){return console.error("캠페인 내용 번역 오류:",e),s}}static async translateMessage(e,t,s){try{let a=await this.translateText(e,t,s);return a?.translatedText||e}catch(t){return console.error("메시지 번역 오류:",t),e}}static getCacheKey(e,t,s){return`translation_${s||"auto"}_${t}_${btoa(e)}`}static async translateWithCache(e,t,s){let a=this.getCacheKey(e,t,s),r=localStorage.getItem(a);if(r)try{return JSON.parse(r)}catch(e){localStorage.removeItem(a)}let n=await this.translateText(e,t,s);if(n){let e={...n,cachedAt:Date.now(),expiresAt:Date.now()+864e5};localStorage.setItem(a,JSON.stringify(e))}return n}static evaluateTranslationQuality(e,t){let s=e.length,a=t.length,r=Math.min(s,a)/Math.max(s,a),n=(t.match(/[^\w\s]/g)||[]).length/a,l=50;return r>.5?l+=20:r>.3&&(l+=10),n>.1?l+=15:n>.05&&(l+=10),Math.min(100,Math.max(0,l))}}function M({text:e,defaultSourceLanguage:t="auto",defaultTargetLanguage:s="en",onTranslation:n,className:l=""}){let[i,o]=(0,r.useState)(t),[d,u]=(0,r.useState)(s),[m,h]=(0,r.useState)(""),[x,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[j]=(0,r.useState)(C.getSupportedLanguages()),N=async()=>{try{await navigator.clipboard.writeText(m),y(!0),setTimeout(()=>y(!1),2e3)}catch(e){console.error("복사 실패:",e)}},M=(e,t)=>{if("speechSynthesis"in window){let s=new SpeechSynthesisUtterance(e);s.lang=t,speechSynthesis.speak(s)}},Z=e=>{if("auto"===e)return"자동 감지";let t=j.find(t=>t.code===e);return t?`${t.nativeName} (${t.name})`:e};return e.trim()?(0,a.jsxs)("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm ${l}`,children:[a.jsx("div",{className:"p-3 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(v,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"번역"})]}),a.jsx("button",{onClick:()=>b(!f),className:"text-xs text-gray-500 hover:text-gray-700",children:f?"접기":"펼치기"})]})}),f&&a.jsx("div",{className:"p-3 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"flex-1 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"auto",children:"자동 감지"}),j.map(e=>a.jsx("option",{value:e.code,children:e.nativeName},e.code))]}),a.jsx("button",{onClick:()=>{"auto"!==i&&(o(d),u(i),h(e))},disabled:"auto"===i,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(w,{className:"w-4 h-4"})}),a.jsx("select",{value:d,onChange:e=>u(e.target.value),className:"flex-1 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:j.map(e=>a.jsx("option",{value:e.code,children:e.nativeName},e.code))})]})}),a.jsx("div",{className:"p-3",children:x?(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(_,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{className:"text-sm",children:"번역 중..."})]}):m?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[a.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:m}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[a.jsx("button",{onClick:()=>M(m,d),className:"p-1 text-gray-400 hover:text-gray-600",title:"음성 재생",children:a.jsx(k,{className:"w-4 h-4"})}),a.jsx("button",{onClick:N,className:"p-1 text-gray-400 hover:text-gray-600",title:"복사",children:g?a.jsx(c.Z,{className:"w-4 h-4 text-green-600"}):a.jsx(S,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[Z(i)," → ",Z(d)]})]}):a.jsx("div",{className:"text-sm text-gray-500",children:"번역할 텍스트를 입력하세요"})})]}):null}function Z({roomId:e,onBack:t}){let{user:s}=(0,x.d)(),[n,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),[p,w]=(0,r.useState)([]),[_,k]=(0,r.useState)(!0),[S,C]=(0,r.useState)(!1),[Z,T]=(0,r.useState)(!1),[q,I]=(0,r.useState)(null),D=(0,r.useRef)(null),P=(0,r.useRef)(null),E=async()=>{if(o.trim()&&s&&!S){C(!0);try{await h.sendMessage(e,s.id,"",o.trim())&&(d(""),await h.markAsRead(e,s.id))}catch(e){console.error("메시지 전송 오류:",e)}finally{C(!1)}}},L=async t=>{let a=t.target.files?.[0];if(a&&s)try{let t=await h.uploadFile(a,e);t&&await h.sendMessage(e,s.id,"",a.name,a.type.startsWith("image/")?"image":"file",[t])}catch(e){console.error("파일 업로드 오류:",e)}},R=e=>new Date(e).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),A=e=>e.sender_id===s?.id?e.read_at?a.jsx(i,{className:"w-4 h-4 text-blue-500"}):a.jsx(c.Z,{className:"w-4 h-4 text-gray-400"}):null;return _?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[t&&a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:a.jsx(g.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"채팅방"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[p.length,"명 온라인"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full",children:a.jsx(y.Z,{className:"w-5 h-5 text-gray-600"})}),a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full",children:a.jsx(f.Z,{className:"w-5 h-5 text-gray-600"})}),a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full",children:a.jsx(b,{className:"w-5 h-5 text-gray-600"})})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map(e=>a.jsx("div",{className:`flex ${e.sender_id===s?.id?"justify-end":"justify-start"}`,children:(0,a.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${e.sender_id===s?.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:["image"===e.message_type&&e.attachments?.[0]&&a.jsx("div",{className:"mb-2",children:a.jsx("img",{src:e.attachments[0],alt:"첨부 이미지",className:"rounded-lg max-w-full h-auto"})}),"file"===e.message_type&&e.attachments?.[0]&&a.jsx("div",{className:"mb-2 p-2 bg-white bg-opacity-20 rounded",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(j,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:e.content})]})}),"text"===e.message_type&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm break-words",children:e.content}),e.sender_id!==s?.id&&(0,a.jsxs)("button",{onClick:()=>{I(e),T(!0)},className:"mt-1 text-xs text-blue-500 hover:text-blue-700 flex items-center space-x-1",children:[a.jsx(v,{className:"w-3 h-3"}),a.jsx("span",{children:"번역"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("span",{className:"text-xs opacity-70",children:R(e.created_at)}),A(e)]})]})},e.id)),a.jsx("div",{ref:D})]}),Z&&q&&(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"메시지 번역"}),a.jsx("button",{onClick:()=>{T(!1),I(null)},className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),a.jsx(M,{text:q.content,defaultTargetLanguage:"ko",className:"text-sm"})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>P.current?.click(),className:"p-2 hover:bg-gray-100 rounded-full",children:a.jsx(j,{className:"w-5 h-5 text-gray-600"})}),a.jsx("div",{className:"flex-1 relative",children:a.jsx("textarea",{value:o,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),E())},placeholder:"메시지를 입력하세요...",className:"w-full px-4 py-2 border border-gray-300 rounded-full resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:1,style:{minHeight:"40px",maxHeight:"120px"}})}),a.jsx("button",{onClick:E,disabled:!o.trim()||S,className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:S?a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):a.jsx(N.Z,{className:"w-5 h-5"})})]}),a.jsx("input",{ref:P,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:L,className:"hidden"})]})]})}function T(){(0,n.useRouter)();let[e,t]=(0,r.useState)(null);return a.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto h-screen flex",children:[a.jsx("div",{className:`${e?"hidden md:block md:w-1/3":"w-full"} border-r border-gray-200`,children:a.jsx(p,{onSelectRoom:e=>{t(e)},onCreateRoom:()=>{console.log("새 채팅방 생성")}})}),e?a.jsx("div",{className:"flex-1 flex flex-col",children:a.jsx(Z,{roomId:e.id,onBack:()=>{t(null)}})}):a.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"채팅을 시작하세요"}),a.jsx("p",{className:"text-gray-500",children:"좌측에서 채팅방을 선택하거나 새 채팅방을 만들어보세요."})]})})]})})}},5442:(e,t,s)=>{"use strict";s.d(t,{supabase:()=>n});var a=s(7939);let r=null,n=(0,a.eI)("https://jltnvoyjnzlswsmddojf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpsdG52b3lqbnpsc3dzbWRkb2pmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzODk5MjQsImV4cCI6MjA3MDk2NTkyNH0.5blt8JeShSgBA50l5bcE30Um1nGlYJAl685XBdVrqdg",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1}})},6333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9730:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},2887:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9436:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},9758:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},8244:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\mark\Documents\ME-IN\app\messages\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,3614,7939,1224],()=>s(4493));module.exports=a})();