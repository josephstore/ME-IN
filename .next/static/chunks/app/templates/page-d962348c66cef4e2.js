(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{7439:function(e,t,r){Promise.resolve().then(r.bind(r,9714))},9714:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(7437),s=r(2265),n=r(9376),i=r(8439);let c=(0,i.eI)("https://jltnvoyjnzlswsmddojf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpsdG52b3lqbnpsc3dzbWRkb2pmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzODk5MjQsImV4cCI6MjA3MDk2NTkyNH0.5blt8JeShSgBA50l5bcE30Um1nGlYJAl685XBdVrqdg");class l{static async createTemplate(e,t){try{var r;let{data:a,error:s}=await c.from("campaign_templates").insert({...e,created_by:t,usage_count:0,is_public:null!==(r=e.is_public)&&void 0!==r&&r}).select().single();if(s)throw s;return a}catch(e){throw console.error("Error creating template:",e),e}}static async getTemplate(e){try{let{data:t,error:r}=await c.from("campaign_templates").select("*").eq("id",e).single();if(r)throw r;return t}catch(e){throw console.error("Error fetching template:",e),e}}static async getMyTemplates(e){try{let{data:t,error:r}=await c.from("campaign_templates").select("*").eq("created_by",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(e){throw console.error("Error fetching my templates:",e),e}}static async getPublicTemplates(e){try{let t=c.from("campaign_templates").select("*").eq("is_public",!0).order("usage_count",{ascending:!1});e&&(t=t.eq("category",e));let{data:r,error:a}=await t;if(a)throw a;return r||[]}catch(e){throw console.error("Error fetching public templates:",e),e}}static async getTemplatesByCategory(e){try{let{data:t,error:r}=await c.from("campaign_templates").select("*").eq("category",e).eq("is_public",!0).order("usage_count",{ascending:!1});if(r)throw r;return t||[]}catch(e){throw console.error("Error fetching templates by category:",e),e}}static async updateTemplate(e,t){try{let{data:r,error:a}=await c.from("campaign_templates").update(t).eq("id",e).select().single();if(a)throw a;return r}catch(e){throw console.error("Error updating template:",e),e}}static async deleteTemplate(e,t){try{let{error:r}=await c.from("campaign_templates").delete().eq("id",e).eq("created_by",t);if(r)throw r}catch(e){throw console.error("Error deleting template:",e),e}}static async incrementUsageCount(e){try{let{error:t}=await c.from("campaign_templates").update({usage_count:c.rpc("increment")}).eq("id",e);if(t)throw t}catch(e){throw console.error("Error incrementing usage count:",e),e}}static generateCampaignFromTemplate(e,t){let{template_data:r}=e,a=(e,t)=>e.replace(/\{\{(\w+)\}\}/g,(e,r)=>t[r]||e);return{title:a(r.title_template,t),title_en:r.title_template_en?a(r.title_template_en,t):void 0,title_ar:r.title_template_ar?a(r.title_template_ar,t):void 0,description:a(r.description_template,t),description_en:r.description_template_en?a(r.description_template_en,t):void 0,description_ar:r.description_template_ar?a(r.description_template_ar,t):void 0,category:e.category,budget_min:r.budget_min,budget_max:r.budget_max,target_languages:r.target_languages,target_regions:r.target_regions,min_followers:r.min_followers,content_requirements:a(r.content_requirements_template,t),content_requirements_en:r.content_requirements_template_en?a(r.content_requirements_template_en,t):void 0,content_requirements_ar:r.content_requirements_template_ar?a(r.content_requirements_template_ar,t):void 0,media_assets:r.media_requirements,start_date:new Date().toISOString(),end_date:new Date(Date.now()+864e5*r.duration_days).toISOString(),application_deadline:new Date(Date.now()+(r.duration_days-7)*864e5).toISOString()}}static async getPopularTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{let{data:t,error:r}=await c.from("campaign_templates").select("*").eq("is_public",!0).order("usage_count",{ascending:!1}).limit(e);if(r)throw r;return t||[]}catch(e){throw console.error("Error fetching popular templates:",e),e}}static async getRecentTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{let{data:t,error:r}=await c.from("campaign_templates").select("*").eq("is_public",!0).order("created_at",{ascending:!1}).limit(e);if(r)throw r;return t||[]}catch(e){throw console.error("Error fetching recent templates:",e),e}}static async searchTemplates(e,t){try{let r=c.from("campaign_templates").select("*").eq("is_public",!0).or("name.ilike.%".concat(e,"%,description.ilike.%").concat(e,"%"));t&&(r=r.eq("category",t));let{data:a,error:s}=await r.order("usage_count",{ascending:!1});if(s)throw s;return a||[]}catch(e){throw console.error("Error searching templates:",e),e}}}var o=r(9397),d=r(1769),m=r(1473),p=r(3247),u=r(740),x=r(7586),h=r(2208),g=r(1723),y=r(5868),f=r(8930);let b=(0,i.eI)("https://jltnvoyjnzlswsmddojf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpsdG52b3lqbnpsc3dzbWRkb2pmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzODk5MjQsImV4cCI6MjA3MDk2NTkyNH0.5blt8JeShSgBA50l5bcE30Um1nGlYJAl685XBdVrqdg"),j=["뷰티","패션","푸드","여행","테크","게임","라이프스타일","교육","비즈니스","엔터테인먼트"];function w(){let e=(0,n.useRouter)(),[t,r]=(0,s.useState)(null),[i,c]=(0,s.useState)([]),[h,g]=(0,s.useState)([]),[y,f]=(0,s.useState)(!0),[w,_]=(0,s.useState)(""),[N,k]=(0,s.useState)(""),[Z,I]=(0,s.useState)("grid"),[C,q]=(0,s.useState)("public");(0,s.useEffect)(()=>{E()},[]),(0,s.useEffect)(()=>{t&&M()},[t,C,N,w]);let E=async()=>{try{let{data:{user:t}}=await b.auth.getUser();if(!t){e.push("/login");return}r(t)}catch(t){console.error("Error checking user:",t),e.push("/login")}finally{f(!1)}},M=async()=>{try{if("public"===C){let e=[];e=w?await l.searchTemplates(w,N||void 0):N?await l.getTemplatesByCategory(N):await l.getPublicTemplates(),c(e)}else{let e=await l.getMyTemplates(t.id);g(e)}}catch(e){console.error("Error loading templates:",e)}},S=t=>{l.incrementUsageCount(t.id),l.generateCampaignFromTemplate(t,{}),e.push("/campaigns/create?template=".concat(t.id))},T=t=>{e.push("/templates/edit/".concat(t))},z=async e=>{if(confirm("정말로 이 템플릿을 삭제하시겠습니까?"))try{await l.deleteTemplate(e,t.id),M()}catch(e){console.error("Error deleting template:",e),alert("템플릿 삭제 중 오류가 발생했습니다.")}},J=()=>{e.push("/templates/create")};if(y)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"로딩 중..."})]})});let O="public"===C?i:h;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"캠페인 템플릿"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"미리 만들어진 캠페인 템플릿을 활용하세요"})]}),(0,a.jsxs)("button",{onClick:J,className:"flex items-center space-x-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"템플릿 만들기"})]})]})})}),(0,a.jsx)("div",{className:"bg-white border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("nav",{className:"flex space-x-8",children:[(0,a.jsxs)("button",{onClick:()=>q("public"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("public"===C?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 inline mr-2"}),"공개 템플릿"]}),(0,a.jsxs)("button",{onClick:()=>q("my"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("my"===C?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 inline mr-2"}),"내 템플릿"]})]})})}),(0,a.jsx)("div",{className:"bg-white border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)("input",{type:"text",placeholder:"템플릿 검색...",value:w,onChange:e=>_(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsxs)("select",{value:N,onChange:e=>k(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"모든 카테고리"}),j.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 border border-gray-300 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>I("grid"),className:"p-2 rounded ".concat("grid"===Z?"bg-primary-100 text-primary-600":"text-gray-400"),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>I("list"),className:"p-2 rounded ".concat("list"===Z?"bg-primary-100 text-primary-600":"text-gray-400"),children:(0,a.jsx)(x.Z,{className:"h-4 w-4"})})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:0===O.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.Z,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"public"===C?"템플릿이 없습니다":"내 템플릿이 없습니다"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"public"===C?"현재 검색 조건에 맞는 템플릿이 없습니다.":"첫 번째 템플릿을 만들어보세요!"}),"my"===C&&(0,a.jsx)("button",{onClick:J,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"템플릿 만들기"})]}):(0,a.jsx)("div",{className:"grid"===Z?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:O.map(e=>(0,a.jsx)(v,{template:e,viewMode:Z,isMyTemplate:"my"===C,onUse:S,onEdit:T,onDelete:z},e.id))})})]})}function v(e){let{template:t,viewMode:r,isMyTemplate:s,onUse:n,onEdit:i,onDelete:c}=e;return"list"===r?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t.name}),(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:t.category}),t.is_public&&(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"공개"})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-3",children:t.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[t.usage_count,"회 사용"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:new Date(t.created_at).toLocaleDateString()})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>n(t),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"사용하기"}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>i(t.id),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>c(t.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})})]})]})]})}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t.name}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:t.is_public&&(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"공개"})})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:t.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:t.category}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:t.usage_count})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("button",{onClick:()=>n(t),className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors mr-2",children:"사용하기"}),s&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>i(t.id),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>c(t.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})})]})]})]})})}},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:o="",children:d,iconNode:m,...p}=e;return(0,a.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:l?24*Number(c)/Number(s):c,className:n("lucide",o),...p},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:l,...o}=r;return(0,a.createElement)(c,{ref:i,iconNode:t,className:n("lucide-".concat(s(e)),l),...o})});return r.displayName="".concat(e),r}},1769:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},740:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},1473:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},7586:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5868:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},8930:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[439,971,117,744],function(){return e(e.s=7439)}),_N_E=e.O()}]);