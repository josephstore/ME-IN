(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[313],{748:function(e,s,r){Promise.resolve().then(r.bind(r,7121))},7121:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return j}});var t=r(7437),a=r(2265),l=r(9376),i=r(4537),n=r(2141);class c{static async createApplication(e){try{var s;let{data:{user:r}}=await n.O.auth.getUser();if(!r)return{data:null,error:"사용자가 인증되지 않았습니다.",success:!1};let{data:t,error:a}=await n.O.from("influencer_profiles").select("id").eq("user_profile_id",null===(s=(await n.O.from("user_profiles").select("id").eq("user_id",r.id).single()).data)||void 0===s?void 0:s.id).single();if(a||!t)return{data:null,error:"인플루언서 프로필을 먼저 생성해주세요.",success:!1};let{data:l}=await n.O.from("applications").select("id").eq("campaign_id",e.campaign_id).eq("influencer_profile_id",t.id).single();if(l)return{data:null,error:"이미 신청한 캠페인입니다.",success:!1};let{data:i,error:c}=await n.O.from("applications").insert({campaign_id:e.campaign_id,influencer_profile_id:t.id,proposal:e.proposal,proposed_budget:e.proposed_budget,proposed_timeline:e.proposed_timeline,portfolio_links:e.portfolio_links||[]}).select().single();if(c)return{data:null,error:c.message,success:!1};return{data:i,error:null,success:!0}}catch(e){return{data:null,error:"신청 생성 중 오류가 발생했습니다.",success:!1}}}static async getApplication(e){try{let{data:s,error:r}=await n.O.from("applications").select("\n          *,\n          campaigns (\n            *,\n            brand_profiles (\n              *,\n              user_profiles (\n                display_name,\n                avatar_url\n              )\n            )\n          ),\n          influencer_profiles (\n            *,\n            user_profiles (\n              display_name,\n              avatar_url\n            )\n          )\n        ").eq("id",e).single();if(r)return{data:null,error:r.message,success:!1};return{data:s,error:null,success:!0}}catch(e){return{data:null,error:"신청 조회 중 오류가 발생했습니다.",success:!1}}}static async getMyApplications(){try{var e;let{data:{user:s}}=await n.O.auth.getUser();if(!s)return{data:null,error:"사용자가 인증되지 않았습니다.",success:!1};let{data:r,error:t}=await n.O.from("applications").select("\n          *,\n          campaigns (\n            *,\n            brand_profiles (\n              *,\n              user_profiles (\n                display_name,\n                avatar_url\n              )\n            )\n          )\n        ").eq("influencer_profiles.user_profile_id",null===(e=(await n.O.from("user_profiles").select("id").eq("user_id",s.id).single()).data)||void 0===e?void 0:e.id).order("created_at",{ascending:!1});if(t)return{data:null,error:t.message,success:!1};return{data:r,error:null,success:!0}}catch(e){return{data:null,error:"신청 목록 조회 중 오류가 발생했습니다.",success:!1}}}static async getCampaignApplications(e){try{var s;let{data:{user:r}}=await n.O.auth.getUser();if(!r)return{data:null,error:"사용자가 인증되지 않았습니다.",success:!1};let{data:t,error:a}=await n.O.from("campaigns").select("brand_profile_id").eq("id",e).single();if(a)return{data:null,error:"캠페인을 찾을 수 없습니다.",success:!1};let{data:l,error:i}=await n.O.from("brand_profiles").select("id").eq("id",t.brand_profile_id).eq("user_profile_id",null===(s=(await n.O.from("user_profiles").select("id").eq("user_id",r.id).single()).data)||void 0===s?void 0:s.id).single();if(i||!l)return{data:null,error:"캠페인 신청을 조회할 권한이 없습니다.",success:!1};let{data:c,error:d}=await n.O.from("applications").select("\n          *,\n          influencer_profiles (\n            *,\n            user_profiles (\n              display_name,\n              avatar_url\n            )\n          )\n        ").eq("campaign_id",e).order("created_at",{ascending:!1});if(d)return{data:null,error:d.message,success:!1};return{data:c,error:null,success:!0}}catch(e){return{data:null,error:"캠페인 신청 조회 중 오류가 발생했습니다.",success:!1}}}static async updateApplicationStatus(e,s,r){try{var t,a;let{data:{user:l}}=await n.O.auth.getUser();if(!l)return{data:null,error:"사용자가 인증되지 않았습니다.",success:!1};let{data:i,error:c}=await n.O.from("applications").select("\n          id,\n          campaigns (\n            brand_profile_id\n          )\n        ").eq("id",e).single();if(c)return{data:null,error:"신청을 찾을 수 없습니다.",success:!1};let{data:d,error:u}=await n.O.from("brand_profiles").select("id").eq("id",null===(t=i.campaigns)||void 0===t?void 0:t.brand_profile_id).eq("user_profile_id",null===(a=(await n.O.from("user_profiles").select("id").eq("user_id",l.id).single()).data)||void 0===a?void 0:a.id).single();if(u||!d)return{data:null,error:"신청 상태를 변경할 권한이 없습니다.",success:!1};let o={status:s};r&&(o.brand_feedback=r);let{data:p,error:m}=await n.O.from("applications").update(o).eq("id",e).select().single();if(m)return{data:null,error:m.message,success:!1};return{data:p,error:null,success:!0}}catch(e){return{data:null,error:"신청 상태 업데이트 중 오류가 발생했습니다.",success:!1}}}static async withdrawApplication(e){try{var s;let{data:{user:r}}=await n.O.auth.getUser();if(!r)return{data:null,error:"사용자가 인증되지 않았습니다.",success:!1};let{data:t,error:a}=await n.O.from("applications").select("\n          id,\n          influencer_profiles (\n            user_profile_id\n          )\n        ").eq("id",e).single();if(a)return{data:null,error:"신청을 찾을 수 없습니다.",success:!1};let{data:l,error:i}=await n.O.from("user_profiles").select("id").eq("id",null===(s=t.influencer_profiles)||void 0===s?void 0:s.user_profile_id).eq("user_id",r.id).single();if(i||!l)return{data:null,error:"신청을 철회할 권한이 없습니다.",success:!1};let{data:c,error:d}=await n.O.from("applications").update({status:"withdrawn"}).eq("id",e).select().single();if(d)return{data:null,error:d.message,success:!1};return{data:c,error:null,success:!0}}catch(e){return{data:null,error:"신청 철회 중 오류가 발생했습니다.",success:!1}}}static async getApplicationStats(){try{let{data:{user:e}}=await n.O.auth.getUser();if(!e)return{data:null,error:"사용자가 인증되지 않았습니다.",success:!1};let{data:s,error:r}=await n.O.from("user_profiles").select("user_type, id").eq("user_id",e.id).single();if(r)return{data:null,error:"사용자 프로필을 찾을 수 없습니다.",success:!1};let t=[];if("influencer"===s.user_type){let{data:e}=await n.O.from("influencer_profiles").select("id").eq("user_profile_id",s.id).single();if(e){let{data:s}=await n.O.from("applications").select("status, created_at, updated_at").eq("influencer_profile_id",e.id);t=s||[]}}else if("brand"===s.user_type){let{data:e}=await n.O.from("brand_profiles").select("id").eq("user_profile_id",s.id).single();if(e){let{data:s}=await n.O.from("applications").select("status, created_at, updated_at").eq("campaigns.brand_profile_id",e.id);t=s||[]}}return{data:{totalApplications:t.length,pendingApplications:t.filter(e=>"pending"===e.status).length,approvedApplications:t.filter(e=>"approved"===e.status).length,rejectedApplications:t.filter(e=>"rejected"===e.status).length,withdrawnApplications:t.filter(e=>"withdrawn"===e.status).length,avgResponseTime:0},error:null,success:!0}}catch(e){return{data:null,error:"신청 통계 조회 중 오류가 발생했습니다.",success:!1}}}static async calculateMatchScore(e,s){try{var r,t,a,l;let{data:i,error:c}=await n.O.from("campaigns").select("*").eq("id",e).single();if(c)return{data:null,error:"캠페인을 찾을 수 없습니다.",success:!1};let{data:d,error:u}=await n.O.from("influencer_profiles").select("\n          *,\n          user_profiles (\n            languages,\n            location\n          )\n        ").eq("id",s).single();if(u)return{data:null,error:"인플루언서 프로필을 찾을 수 없습니다.",success:!1};let o=0;if(d.total_followers>=i.min_followers?o+=30:o+=d.total_followers/i.min_followers*30,(null===(r=i.target_languages)||void 0===r?void 0:r.length)&&(null===(a=d.user_profiles)||void 0===a?void 0:null===(t=a.languages)||void 0===t?void 0:t.length)){let e=i.target_languages.filter(e=>d.user_profiles.languages.includes(e)).length;o+=e/i.target_languages.length*25}return i.category&&(null===(l=d.content_categories)||void 0===l?void 0:l.length)&&d.content_categories.some(e=>i.category.toLowerCase().includes(e.toLowerCase()))&&(o+=25),d.avg_engagement_rate>0&&(o+=Math.min(2*d.avg_engagement_rate,20)),{data:Math.round(o),error:null,success:!0}}catch(e){return{data:null,error:"매칭 점수 계산 중 오류가 발생했습니다.",success:!1}}}static async createRecommendedApplication(e){try{var s,r;let{data:{user:t}}=await n.O.auth.getUser();if(!t)return{data:null,error:"사용자가 인증되지 않았습니다.",success:!1};let{data:a,error:l}=await n.O.from("influencer_profiles").select("\n          *,\n          user_profiles (\n            display_name\n          )\n        ").eq("user_profile_id",null===(s=(await n.O.from("user_profiles").select("id").eq("user_id",t.id).single()).data)||void 0===s?void 0:s.id).single();if(l||!a)return{data:null,error:"인플루언서 프로필을 찾을 수 없습니다.",success:!1};let{data:i,error:c}=await n.O.from("campaigns").select("*").eq("id",e).single();if(c)return{data:null,error:"캠페인을 찾을 수 없습니다.",success:!1};let d="안녕하세요! ".concat(i.title," 캠페인에 관심이 있어 신청드립니다.\n\n저는 ").concat(a.user_profiles.display_name,"으로, ").concat(a.total_followers.toLocaleString(),"명의 팔로워를 보유하고 있습니다.\n\n주요 강점:\n• 평균 참여율: ").concat(a.avg_engagement_rate,"%\n• 콘텐츠 카테고리: ").concat((null===(r=a.content_categories)||void 0===r?void 0:r.join(", "))||"다양한 분야","\n• 협업 이력: ").concat(a.collaboration_history,"회\n\n제안 예산: ").concat(i.budget_min.toLocaleString()," - ").concat(i.budget_max.toLocaleString()," ").concat(i.currency,"\n예상 소요 기간: 2-3주\n\n더 자세한 내용은 개별 연락을 통해 논의하고 싶습니다.\n감사합니다!"),u={campaign_id:e,proposal:d,proposed_budget:Math.floor((i.budget_min+i.budget_max)/2),proposed_timeline:"2-3주",portfolio_links:a.portfolio_url?[a.portfolio_url]:[]};return await this.createApplication(u)}catch(e){return{data:null,error:"추천 신청 생성 중 오류가 발생했습니다.",success:!1}}}}var d=r(6867),u=r(344),o=r(2660),p=r(6595),m=r(5252),f=r(5805),g=r(1047),x=r(9202),h=r(4743),_=r(2718),y=r(401),v=r(2489),b=r(2720);function j(){var e,s,r,j,w,N,O,k,q,Z,P;let S=(0,l.useParams)(),A=(0,l.useRouter)(),C=S.id,[U,I]=(0,a.useState)(!0),[M,z]=(0,a.useState)(null),[L,R]=(0,a.useState)(null),[E,J]=(0,a.useState)(null),[B,X]=(0,a.useState)([]),[G,H]=(0,a.useState)(0),[T,V]=(0,a.useState)(!1),[W,Y]=(0,a.useState)(!1),[D,F]=(0,a.useState)(!1),[Q,$]=(0,a.useState)({campaign_id:C,proposal:"",proposed_budget:0,proposed_timeline:"",portfolio_links:[]});(0,a.useEffect)(()=>{C&&(ee(),K())},[C]);let K=async()=>{let{data:{user:e}}=await n.O.auth.getUser();if(e){R(e);let s=await d.H.getCompleteProfile();if(s.success&&s.data&&(J(s.data),"influencer"===s.data.userProfile.user_type&&s.data.influencerProfile)){let e=await c.calculateMatchScore(C,s.data.influencerProfile.id);e.success&&H(e.data||0)}}},ee=async()=>{try{I(!0);let t=await i.U.getCampaign(C);if(t.success&&t.data){var e,s,r;if(z(t.data),(null==E?void 0:null===(e=E.userProfile)||void 0===e?void 0:e.user_type)==="brand"){let e=await c.getCampaignApplications(C);e.success&&X(e.data||[])}if((null==E?void 0:null===(s=E.userProfile)||void 0===s?void 0:s.user_type)==="influencer"){let e=await c.getMyApplications();if(e.success){let s=null===(r=e.data)||void 0===r?void 0:r.some(e=>e.campaign_id===C);F(s||!1)}}}}catch(e){console.error("캠페인 로드 오류:",e)}finally{I(!1)}},es=async()=>{try{var e;if(Y(!0),!(null===(e=Q.proposal)||void 0===e?void 0:e.trim())){alert("제안서를 작성해주세요.");return}let s=await c.createApplication(Q);s.success?(alert("신청이 성공적으로 제출되었습니다!"),V(!1),F(!0),$({campaign_id:C,proposal:"",proposed_budget:0,proposed_timeline:"",portfolio_links:[]})):alert("신청 실패: ".concat(s.error))}catch(e){console.error("신청 제출 오류:",e),alert("신청 제출 중 오류가 발생했습니다.")}finally{Y(!1)}},er=async()=>{try{Y(!0);let e=await c.createRecommendedApplication(C);e.success?(alert("신청이 성공적으로 제출되었습니다!"),F(!0)):alert("신청 실패: ".concat(e.error))}catch(e){console.error("빠른 신청 오류:",e),alert("신청 중 오류가 발생했습니다.")}finally{Y(!1)}},et=async(e,s,r)=>{try{let t=await c.updateApplicationStatus(e,s,r);t.success?(alert("신청 상태가 업데이트되었습니다."),ee()):alert("상태 업데이트 실패: ".concat(t.error))}catch(e){console.error("상태 업데이트 오류:",e),alert("상태 업데이트 중 오류가 발생했습니다.")}},ea=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"reviewed":return"bg-blue-100 text-blue-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},el=e=>{switch(e){case"pending":return"검토 대기";case"reviewed":return"검토 완료";case"approved":return"승인됨";case"rejected":return"거절됨";case"withdrawn":return"철회됨";default:return e}};return U?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"캠페인을 불러오는 중..."})]})}):M?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(u.z,{onClick:()=>A.back(),variant:"outline",size:"sm",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"뒤로"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:M.title}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(null===(s=M.brand_profiles)||void 0===s?void 0:null===(e=s.user_profiles)||void 0===e?void 0:e.display_name)||"브랜드"," • ",M.category]})]})]}),(null==E?void 0:null===(r=E.userProfile)||void 0===r?void 0:r.user_type)==="influencer"&&G>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 bg-blue-50 px-4 py-2 rounded-lg",children:[(0,t.jsx)(p.Z,{className:"w-5 h-5 text-blue-600"}),(0,t.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:["매칭 점수: ",G,"점"]})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"캠페인 정보"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"설명"}),(0,t.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:M.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(m.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"예산"}),(0,t.jsxs)("p",{className:"text-gray-900",children:[M.currency," ",M.budget_min.toLocaleString()," - ",M.budget_max.toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(f.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"최소 팔로워"}),(0,t.jsxs)("p",{className:"text-gray-900",children:[M.min_followers.toLocaleString(),"명"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(g.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"기간"}),(0,t.jsx)("p",{className:"text-gray-900",children:M.start_date&&M.end_date?"".concat(M.start_date," ~ ").concat(M.end_date):"미정"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"타겟 언어"}),(0,t.jsx)("p",{className:"text-gray-900",children:(null===(j=M.target_languages)||void 0===j?void 0:j.length)?M.target_languages.join(", "):"제한 없음"})]})]})]}),M.content_requirements&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"콘텐츠 요구사항"}),(0,t.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:M.content_requirements})]})]})]}),(null==E?void 0:null===(w=E.userProfile)||void 0===w?void 0:w.user_type)==="influencer"&&!D&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"캠페인 신청"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)(u.z,{onClick:er,disabled:W,className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),W?"신청 중...":"빠른 신청"]}),(0,t.jsxs)(u.z,{onClick:()=>V(!0),variant:"outline",children:[(0,t.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),"상세 신청"]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"빠른 신청을 사용하면 자동으로 제안서가 생성됩니다."})]})]}),T&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"상세 신청"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"제안서 *"}),(0,t.jsx)("textarea",{value:Q.proposal,onChange:e=>$(s=>({...s,proposal:e.target.value})),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"캠페인에 대한 제안과 계획을 자세히 작성해주세요..."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"제안 예산"}),(0,t.jsx)("input",{type:"number",value:Q.proposed_budget,onChange:e=>$(s=>({...s,proposed_budget:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"예상 소요 기간"}),(0,t.jsx)("input",{type:"text",value:Q.proposed_timeline,onChange:e=>$(s=>({...s,proposed_timeline:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: 2-3주"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)(u.z,{onClick:es,disabled:W,className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),W?"제출 중...":"신청 제출"]}),(0,t.jsx)(u.z,{onClick:()=>V(!1),variant:"outline",children:"취소"})]})]})]}),D&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(y.Z,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("p",{className:"text-green-800 font-medium",children:"신청이 완료되었습니다!"})]}),(0,t.jsx)("p",{className:"text-green-700 text-sm mt-1",children:"브랜드의 검토 결과를 기다려주세요. 결과는 알림으로 받으실 수 있습니다."})]}),(null==E?void 0:null===(N=E.userProfile)||void 0===N?void 0:N.user_type)==="brand"&&B.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["신청 목록 (",B.length,"건)"]}),(0,t.jsx)("div",{className:"space-y-4",children:B.map(e=>{var s,r,a,l;return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(f.Z,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:(null===(r=e.influencer_profiles)||void 0===r?void 0:null===(s=r.user_profiles)||void 0===s?void 0:s.display_name)||"인플루언서"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[null===(l=e.influencer_profiles)||void 0===l?void 0:null===(a=l.total_followers)||void 0===a?void 0:a.toLocaleString(),"명 팔로워"]})]})]}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(ea(e.status)),children:el(e.status)})]}),e.proposal&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap line-clamp-3",children:e.proposal})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.proposed_budget&&(0,t.jsxs)("span",{children:["예산: ",e.proposed_budget.toLocaleString()]}),e.proposed_timeline&&(0,t.jsxs)("span",{children:["기간: ",e.proposed_timeline]})]}),"pending"===e.status&&(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(u.z,{onClick:()=>et(e.id,"approved"),size:"sm",className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(y.Z,{className:"w-4 h-4 mr-1"}),"승인"]}),(0,t.jsxs)(u.z,{onClick:()=>et(e.id,"rejected"),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 mr-1"}),"거절"]})]})]})]},e.id)})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"브랜드 정보"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(f.Z,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:(null===(k=M.brand_profiles)||void 0===k?void 0:null===(O=k.user_profiles)||void 0===O?void 0:O.display_name)||"브랜드"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:null===(q=M.brand_profiles)||void 0===q?void 0:q.company_name})]})]}),(null===(Z=M.brand_profiles)||void 0===Z?void 0:Z.industry)&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:M.brand_profiles.industry})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"캠페인 통계"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"신청자 수"}),(0,t.jsxs)("span",{className:"font-medium text-gray-900",children:[B.length,"명"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"상태"}),(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(ea(M.status)),children:el(M.status)})]}),M.application_deadline&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"신청 마감"}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:M.application_deadline})]})]})]}),(null==E?void 0:null===(P=E.userProfile)||void 0===P?void 0:P.user_type)==="influencer"&&G>0&&(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"매칭 정보"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-blue-700",children:"매칭 점수"}),(0,t.jsxs)("span",{className:"font-bold text-blue-900 text-lg",children:[G,"점"]})]}),(0,t.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(G,"%")}})}),(0,t.jsx)("p",{className:"text-xs text-blue-600",children:G>=80?"매우 높은 매칭도":G>=60?"높은 매칭도":G>=40?"보통 매칭도":"낮은 매칭도"})]})]})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-gray-600",children:"캠페인을 찾을 수 없습니다."}),(0,t.jsx)(u.z,{onClick:()=>A.back(),className:"mt-4 bg-blue-600 hover:bg-blue-700",children:"뒤로 가기"})]})})}},6867:function(e,s,r){"use strict";r.d(s,{H:function(){return a}});var t=r(2141);class a{static async createUserProfile(e){try{let{data:{user:s}}=await t.O.auth.getUser();if(!s)return{data:null,error:"사용자가 인증되지 않았습니다.",success:!1};let{data:r,error:a}=await t.O.from("user_profiles").insert(e).select().single();if(a)return{data:null,error:a.message,success:!1};return{data:r,error:null,success:!0}}catch(e){return{data:null,error:"프로필 생성 중 오류가 발생했습니다.",success:!1}}}static async getUserProfile(){try{let{data:{user:e}}=await t.O.auth.getUser();if(!e)return{data:null,error:"사용자가 인증되지 않았습니다.",success:!1};let{data:s,error:r}=await t.O.from("user_profiles").select("*").eq("user_id",e.id).single();if(r)return{data:null,error:r.message,success:!1};return{data:s,error:null,success:!0}}catch(e){return{data:null,error:"프로필 조회 중 오류가 발생했습니다.",success:!1}}}static async updateUserProfile(e){try{let{data:{user:s}}=await t.O.auth.getUser();if(!s)return{data:null,error:"사용자가 인증되지 않았습니다.",success:!1};let{data:r,error:a}=await t.O.from("user_profiles").update(e).eq("user_id",s.id).select().single();if(a)return{data:null,error:a.message,success:!1};return{data:r,error:null,success:!0}}catch(e){return{data:null,error:"프로필 업데이트 중 오류가 발생했습니다.",success:!1}}}static async createBrandProfile(e){try{let s=await this.getUserProfile();if(!s.success||!s.data)return{data:null,error:"사용자 프로필을 먼저 생성해주세요.",success:!1};let{data:r,error:a}=await t.O.from("brand_profiles").insert({user_profile_id:s.data.id,...e}).select().single();if(a)return{data:null,error:a.message,success:!1};return{data:r,error:null,success:!0}}catch(e){return{data:null,error:"브랜드 프로필 생성 중 오류가 발생했습니다.",success:!1}}}static async getBrandProfile(){try{let e=await this.getUserProfile();if(!e.success||!e.data)return{data:null,error:"사용자 프로필을 찾을 수 없습니다.",success:!1};let{data:s,error:r}=await t.O.from("brand_profiles").select("*").eq("user_profile_id",e.data.id).single();if(r)return{data:null,error:r.message,success:!1};return{data:s,error:null,success:!0}}catch(e){return{data:null,error:"브랜드 프로필 조회 중 오류가 발생했습니다.",success:!1}}}static async updateBrandProfile(e){try{let s=await this.getUserProfile();if(!s.success||!s.data)return{data:null,error:"사용자 프로필을 찾을 수 없습니다.",success:!1};let{data:r,error:a}=await t.O.from("brand_profiles").update(e).eq("user_profile_id",s.data.id).select().single();if(a)return{data:null,error:a.message,success:!1};return{data:r,error:null,success:!0}}catch(e){return{data:null,error:"브랜드 프로필 업데이트 중 오류가 발생했습니다.",success:!1}}}static async createInfluencerProfile(e){try{let s=await this.getUserProfile();if(!s.success||!s.data)return{data:null,error:"사용자 프로필을 먼저 생성해주세요.",success:!1};let{data:r,error:a}=await t.O.from("influencer_profiles").insert(e).select().single();if(a)return{data:null,error:a.message,success:!1};return{data:r,error:null,success:!0}}catch(e){return{data:null,error:"인플루언서 프로필 생성 중 오류가 발생했습니다.",success:!1}}}static async getInfluencerProfile(){try{let e=await this.getUserProfile();if(!e.success||!e.data)return{data:null,error:"사용자 프로필을 찾을 수 없습니다.",success:!1};let{data:s,error:r}=await t.O.from("influencer_profiles").select("*").eq("user_profile_id",e.data.id).single();if(r)return{data:null,error:r.message,success:!1};return{data:s,error:null,success:!0}}catch(e){return{data:null,error:"인플루언서 프로필 조회 중 오류가 발생했습니다.",success:!1}}}static async updateInfluencerProfile(e){try{let s=await this.getUserProfile();if(!s.success||!s.data)return{data:null,error:"사용자 프로필을 찾을 수 없습니다.",success:!1};let{data:r,error:a}=await t.O.from("influencer_profiles").update(e).eq("user_profile_id",s.data.id).select().single();if(a)return{data:null,error:a.message,success:!1};return{data:r,error:null,success:!0}}catch(e){return{data:null,error:"인플루언서 프로필 업데이트 중 오류가 발생했습니다.",success:!1}}}static async addSocialAccount(e){try{let s=await this.getInfluencerProfile();if(!s.success||!s.data)return{data:null,error:"인플루언서 프로필을 먼저 생성해주세요.",success:!1};let{data:r,error:a}=await t.O.from("social_accounts").insert({influencer_profile_id:s.data.id,...e}).select().single();if(a)return{data:null,error:a.message,success:!1};return{data:r,error:null,success:!0}}catch(e){return{data:null,error:"소셜 계정 추가 중 오류가 발생했습니다.",success:!1}}}static async getSocialAccounts(){try{let e=await this.getInfluencerProfile();if(!e.success||!e.data)return{data:null,error:"인플루언서 프로필을 찾을 수 없습니다.",success:!1};let{data:s,error:r}=await t.O.from("social_accounts").select("*").eq("influencer_profile_id",e.data.id);if(r)return{data:null,error:r.message,success:!1};return{data:s,error:null,success:!0}}catch(e){return{data:null,error:"소셜 계정 조회 중 오류가 발생했습니다.",success:!1}}}static async updateSocialAccount(e,s){try{let{data:r,error:a}=await t.O.from("social_accounts").update(s).eq("id",e).select().single();if(a)return{data:null,error:a.message,success:!1};return{data:r,error:null,success:!0}}catch(e){return{data:null,error:"소셜 계정 업데이트 중 오류가 발생했습니다.",success:!1}}}static async deleteSocialAccount(e){try{let{error:s}=await t.O.from("social_accounts").delete().eq("id",e);if(s)return{data:null,error:s.message,success:!1};return{data:null,error:null,success:!0}}catch(e){return{data:null,error:"소셜 계정 삭제 중 오류가 발생했습니다.",success:!1}}}static async getCompleteProfile(){try{let e,s,r;let t=await this.getUserProfile();if(!t.success||!t.data)return{data:null,error:"사용자 프로필을 찾을 수 없습니다.",success:!1};let a=t.data;if("brand"===a.user_type){let s=await this.getBrandProfile();s.success&&(e=s.data||void 0)}else if("influencer"===a.user_type){let e=await this.getInfluencerProfile();e.success&&(s=e.data||void 0);let t=await this.getSocialAccounts();t.success&&(r=t.data||void 0)}return{data:{userProfile:a,brandProfile:e,influencerProfile:s,socialAccounts:r},error:null,success:!0}}catch(e){return{data:null,error:"프로필 조회 중 오류가 발생했습니다.",success:!1}}}}},2141:function(e,s,r){"use strict";r.d(s,{O:function(){return t}});let t=(0,r(8439).eI)("https://jltnvoyjnzlswsmddojf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpsdG52b3lqbnpsc3dzbWRkb2pmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzODk5MjQsImV4cCI6MjA3MDk2NTkyNH0.5blt8JeShSgBA50l5bcE30Um1nGlYJAl685XBdVrqdg")},9205:function(e,s,r){"use strict";r.d(s,{Z:function(){return c}});var t=r(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return s.filter((e,s,r)=>!!e&&r.indexOf(e)===s).join(" ")};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,t.forwardRef)((e,s)=>{let{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:u,iconNode:o,...p}=e;return(0,t.createElement)("svg",{ref:s,...i,width:a,height:a,stroke:r,strokeWidth:c?24*Number(n)/Number(a):n,className:l("lucide",d),...p},[...o.map(e=>{let[s,r]=e;return(0,t.createElement)(s,r)}),...Array.isArray(u)?u:[u]])}),c=(e,s)=>{let r=(0,t.forwardRef)((r,i)=>{let{className:c,...d}=r;return(0,t.createElement)(n,{ref:i,iconNode:s,className:l("lucide-".concat(a(e)),c),...d})});return r.displayName="".concat(e),r}},1047:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},401:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9202:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},2718:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},4743:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},6595:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},2720:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},2489:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,s,r){"use strict";var t=r(5475);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})}},function(e){e.O(0,[439,862,971,117,744],function(){return e(e.s=748)}),_N_E=e.O()}]);