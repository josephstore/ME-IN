(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{1639:function(e,t,r){Promise.resolve().then(r.bind(r,1618))},1618:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var s=r(7437),a=r(2265),l=r(9376),i=r(8439),n=r(9696),d=r(6867),c=r(2660),o=r(3229),x=r(2720),m=r(2489),u=r(7689),p=r(3581),g=r(9374),h=r(8736),b=r(8930),f=r(9397);let y=(0,i.eI)("https://jltnvoyjnzlswsmddojf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpsdG52b3lqbnpsc3dzbWRkb2pmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzODk5MjQsImV4cCI6MjA3MDk2NTkyNH0.5blt8JeShSgBA50l5bcE30Um1nGlYJAl685XBdVrqdg"),j=["패션/뷰티","푸드/요리","여행/라이프스타일","테크/가전","게임/엔터테인먼트","교육/지식","건강/피트니스","패러디/유머","뷰티/메이크업","육아/가족","반려동물","기타"];function N(){let e=(0,l.useRouter)(),[t,r]=(0,a.useState)(null),[i,N]=(0,a.useState)(null),[v,w]=(0,a.useState)(null),[k,_]=(0,a.useState)(!0),[C,Z]=(0,a.useState)(!1),[S,I]=(0,a.useState)({title:"",title_en:"",title_ar:"",description:"",description_en:"",description_ar:"",category:"",is_public:!0,featured:!1}),[E,M]=(0,a.useState)([]),[J,z]=(0,a.useState)(""),[U,O]=(0,a.useState)([]),[P,A]=(0,a.useState)([]),[X,B]=(0,a.useState)({});(0,a.useEffect)(()=>{F()},[]),(0,a.useEffect)(()=>{t&&H()},[t]);let F=async()=>{let{data:{user:e}}=await y.auth.getUser();r(e),_(!1)},H=async()=>{if(!t)return;let e=await d.H.getCompleteProfile();e.success&&e.data&&(N(e.data.userProfile),w(e.data.influencerProfile||null))},R=(e,t)=>{I(r=>({...r,[e]:t})),X[e]&&B(t=>({...t,[e]:""}))},Y=()=>{J.trim()&&!E.includes(J.trim())&&(M(e=>[...e,J.trim()]),z(""))},D=e=>{M(t=>t.filter(t=>t!==e))},G=e=>{O(t=>t.filter(t=>t.id!==e))},L=(e,t,r)=>{O(s=>s.map(s=>s.id===e?{...s,[t]:r}:s))},T=(e,t,r)=>{A(s=>s.map(s=>s.id===e?{...s,[t]:r}:s))},V=e=>{A(t=>t.filter(t=>t.id!==e))},W=()=>{let e={};return S.title.trim()||(e.title="제목을 입력해주세요"),S.category||(e.category="카테고리를 선택해주세요"),S.description.trim()||(e.description="설명을 입력해주세요"),B(e),0===Object.keys(e).length},q=async()=>{let e=[];for(let r of U)try{let s=r.file.name.split(".").pop(),a="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9),".").concat(s),l="portfolios/".concat(null==t?void 0:t.id,"/").concat(a),{data:i,error:n}=await y.storage.from("media").upload(l,r.file);if(n)throw n;let{data:{publicUrl:d}}=y.storage.from("media").getPublicUrl(l);e.push(d)}catch(e){throw console.error("Error uploading file:",e),Error("파일 업로드 실패: ".concat(r.file.name))}return e},Q=async()=>{if(W()){if(!v){alert("인플루언서 프로필이 필요합니다.");return}Z(!0);try{let t=await q(),r=P.reduce((e,t)=>(t.platform&&t.url&&(e[t.platform]={url:t.url,title:t.title}),e),{}),s={influencer_profile_id:v.id,title:S.title,title_en:S.title_en||void 0,title_ar:S.title_ar||void 0,description:S.description,description_en:S.description_en||void 0,description_ar:S.description_ar||void 0,category:S.category,media_urls:t,external_links:r,tags:E,is_public:S.is_public,featured:S.featured},a=await n.M.createPortfolio(s);a.success?(alert("포트폴리오가 성공적으로 생성되었습니다!"),e.push("/portfolios")):alert("포트폴리오 생성 실패: ".concat(a.error))}catch(e){console.error("Error creating portfolio:",e),alert("포트폴리오 생성 중 오류가 발생했습니다: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{Z(!1)}}};return k?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"로딩 중..."})]})}):v?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>e.back(),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)(c.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"포트폴리오 등록"}),(0,s.jsx)("p",{className:"text-gray-600",children:"당신의 창작물을 보여주세요"})]})]}),(0,s.jsxs)("button",{onClick:Q,disabled:C,className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4"}),C?"저장 중...":"저장"]})]})})}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"기본 정보"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"제목 *"}),(0,s.jsx)("input",{type:"text",value:S.title,onChange:e=>R("title",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent ".concat(X.title?"border-red-500":"border-gray-300"),placeholder:"포트폴리오 제목을 입력하세요"}),X.title&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:X.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"영문 제목"}),(0,s.jsx)("input",{type:"text",value:S.title_en,onChange:e=>R("title_en",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"English title"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"아랍어 제목"}),(0,s.jsx)("input",{type:"text",value:S.title_ar,onChange:e=>R("title_ar",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"العنوان بالعربية"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"카테고리 *"}),(0,s.jsxs)("select",{value:S.category,onChange:e=>R("category",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent ".concat(X.category?"border-red-500":"border-gray-300"),children:[(0,s.jsx)("option",{value:"",children:"카테고리 선택"}),j.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),X.category&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:X.category})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"공개 설정"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:S.is_public,onChange:e=>R("is_public",e.target.checked),className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"공개"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:S.featured,onChange:e=>R("featured",e.target.checked),className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"추천 포트폴리오"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"설명"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"설명 *"}),(0,s.jsx)("textarea",{value:S.description,onChange:e=>R("description",e.target.value),rows:4,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent ".concat(X.description?"border-red-500":"border-gray-300"),placeholder:"포트폴리오에 대한 설명을 입력하세요"}),X.description&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:X.description})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"영문 설명"}),(0,s.jsx)("textarea",{value:S.description_en,onChange:e=>R("description_en",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"English description"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"아랍어 설명"}),(0,s.jsx)("textarea",{value:S.description_ar,onChange:e=>R("description_ar",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"الوصف بالعربية"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"태그"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:J,onChange:e=>z(e.target.value),onKeyPress:e=>"Enter"===e.key&&Y(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"태그를 입력하고 Enter를 누르세요"}),(0,s.jsx)("button",{onClick:Y,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"추가"})]}),E.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:E.map(e=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:[(0,s.jsx)(x.Z,{className:"w-3 h-3"}),e,(0,s.jsx)("button",{onClick:()=>D(e),className:"ml-1 text-red-600 hover:text-red-800",children:(0,s.jsx)(m.Z,{className:"w-3 h-3"})})]},e))})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"미디어 파일"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,s.jsx)(u.Z,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"이미지, 비디오, 문서 파일을 업로드하세요"}),(0,s.jsx)("input",{type:"file",multiple:!0,accept:"image/*,video/*,.pdf,.doc,.docx",onChange:e=>{let t=e.target.files;t&&Array.from(t).forEach(e=>{let t={id:Math.random().toString(36).substr(2,9),file:e,type:e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":"document",title:e.name,description:""};O(e=>[...e,t])})},className:"hidden",id:"media-upload"}),(0,s.jsx)("label",{htmlFor:"media-upload",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors cursor-pointer",children:"파일 선택"})]}),U.length>0&&(0,s.jsx)("div",{className:"space-y-3",children:U.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex-shrink-0",children:["image"===e.type&&(0,s.jsx)(p.Z,{className:"w-6 h-6 text-blue-500"}),"video"===e.type&&(0,s.jsx)(g.Z,{className:"w-6 h-6 text-purple-500"}),"document"===e.type&&(0,s.jsx)(h.Z,{className:"w-6 h-6 text-green-500"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[(e.file.size/1024/1024).toFixed(2)," MB"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",value:e.title||"",onChange:t=>L(e.id,"title",t.target.value),placeholder:"제목",className:"px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-red-500"}),(0,s.jsx)("button",{onClick:()=>G(e.id),className:"p-1 text-red-600 hover:text-red-800",children:(0,s.jsx)(b.Z,{className:"w-4 h-4"})})]})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"외부 링크"}),(0,s.jsxs)("button",{onClick:()=>{let e={id:Math.random().toString(36).substr(2,9),platform:"",url:"",title:""};A(t=>[...t,e])},className:"flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4"}),"링크 추가"]})]}),P.length>0?(0,s.jsx)("div",{className:"space-y-3",children:P.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg",children:[(0,s.jsx)("input",{type:"text",value:e.platform,onChange:t=>T(e.id,"platform",t.target.value),placeholder:"플랫폼 (예: YouTube, Instagram)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"}),(0,s.jsx)("input",{type:"url",value:e.url,onChange:t=>T(e.id,"url",t.target.value),placeholder:"URL",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"}),(0,s.jsx)("input",{type:"text",value:e.title||"",onChange:t=>T(e.id,"title",t.target.value),placeholder:"제목 (선택사항)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"}),(0,s.jsx)("button",{onClick:()=>V(e.id),className:"p-2 text-red-600 hover:text-red-800",children:(0,s.jsx)(b.Z,{className:"w-4 h-4"})})]},e.id))}):(0,s.jsx)("p",{className:"text-gray-500 text-center py-4",children:"외부 링크가 없습니다"})]})]})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"인플루언서 프로필이 필요합니다"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"포트폴리오를 생성하려면 먼저 인플루언서 프로필을 완성해주세요."}),(0,s.jsx)("button",{onClick:()=>e.push("/profile"),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"프로필 완성하기"})]})})}},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7689:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[439,247,991,971,117,744],function(){return e(e.s=1639)}),_N_E=e.O()}]);